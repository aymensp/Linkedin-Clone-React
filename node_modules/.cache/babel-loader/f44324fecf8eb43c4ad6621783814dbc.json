{"ast":null,"code":"var _jsxFileName = \"/Users/ayman/Desktop/final/AutoHire_react/src/Company/RatingsCmp.js\",\n    _s = $RefreshSig$();\n\nimport React, { forwardRef, useDebugValue, useEffect, useState } from 'react';\nimport logo from '../assets/pdp.png';\nimport Auxiliary from '../Auxiliary';\nimport './company.css';\nimport RatingPopup from './RatingPopup';\nimport '../Company/RatingPopup.css';\nimport { url } from '../BaseUrl';\nimport axios from 'axios';\nimport { FaStar } from \"react-icons/fa\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst RatingCmp = /*#__PURE__*/forwardRef(_c = _s(props => {\n  _s();\n\n  const [posts, setPosts] = useState([]); // const idCompany = localStorage.getItem('cmp')\n\n  let nomCmp = props.location.pathname.split('/')[2];\n  const userr = localStorage.getItem('user');\n  const currentUser = JSON.parse(userr);\n  useEffect(() => {\n    axios.get(`${url}avis/e/${nomCmp}`).then(res => {\n      console.log(res.data);\n      setPosts(res.data);\n    });\n  }, []);\n  const [buttonPopup, setButtonPopup] = useState(false);\n  let s = 0;\n  let l,\n      avg = 0;\n  let result;\n\n  const compare = () => {\n    if (avg <= 1) {\n      result = 1;\n    } else if (avg <= 2) {\n      result = 2;\n    } else if (avg <= 3) {\n      result = 3;\n    } else if (avg <= 4) {\n      result = 4;\n    } else if (avg > 4) {\n      result = 5;\n    } else {\n      result = 1;\n    }\n\n    return result;\n  };\n\n  const [rating, setRating] = useState(null);\n  const [hover, setHover] = useState(null);\n  const [comment, setComment] = useState('');\n  const [erreur, setErreur] = useState('');\n\n  const RateFn = e => {\n    e.preventDefault();\n\n    if (comment !== \"\" && rating > 0) {\n      axios.post(`${url}avis/newAvis`, {\n        niveau: rating,\n        commentaire: comment,\n        entreprise: nomCmp,\n        personne: currentUser.username\n      }).then(response => {\n        setComment(\"\");\n        setRating(0);\n        console.log(response.data);\n      }, error => {\n        console.log(error);\n      });\n    } else {\n      setErreur(\"Empty Comment or Stars !  \");\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(Auxiliary, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"company_description\",\n      style: {\n        height: '1000px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"absolute\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Rate this Company!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 1\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [...Array(5)].map((star, i) => {\n              const ratingValue = i + 1;\n              return /*#__PURE__*/_jsxDEV(\"label\", {\n                children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"radio\",\n                  name: \"rating\",\n                  hidden: \"true\",\n                  value: ratingValue,\n                  onClick: () => setRating(ratingValue)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 104,\n                  columnNumber: 43\n                }, this), /*#__PURE__*/_jsxDEV(FaStar, {\n                  className: \"star\",\n                  color: ratingValue <= (hover || rating) ? \"#ffc107\" : \"#e4e5e9\",\n                  size: 15,\n                  onMouseEnter: () => setHover(ratingValue),\n                  onMouseLeave: () => setHover(null)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 107,\n                  columnNumber: 24\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 104,\n                columnNumber: 35\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            value: comment,\n            onChange: e => setComment(e.target.value),\n            type: \"text\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 16\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            value: erreur,\n            onChange: e => setErreur(e.target.value),\n            type: \"text\",\n            style: {\n              border: 'none',\n              color: 'red'\n            },\n            disabled: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 119,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 17\n          }, this), \" \", /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            style: {\n              color: 'white',\n              fontSize: '13px',\n              lineHeight: '1.7'\n            },\n            className: \"btnAvis\",\n            onClick: e => RateFn(e),\n            children: \"rate\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 27\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 124,\n            columnNumber: 1\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 1\n        }, this), /*#__PURE__*/_jsxDEV(RatingPopup, {\n          trigger: buttonPopup,\n          setTrigger: setButtonPopup,\n          children: /*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Rating \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 129,\n            columnNumber: 12\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 8\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 1\n      }, this), /*#__PURE__*/_jsxDEV(\"main\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 1\n      }, this), /*#__PURE__*/_jsxDEV(\"h6\", {\n        className: \"hide\",\n        children: [\"  \", posts.map(({\n          niveau\n        }) => {\n          s += niveau;\n          l = posts.length;\n        })]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"h6\", {\n        className: \"hide\",\n        children: (avg = s / l, compare())\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 3\n      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [\" Total Ratings:\", [...Array(result)].map((star, i) => {\n            const ratingValue = i + 1;\n            return /*#__PURE__*/_jsxDEV(\"label\", {\n              children: /*#__PURE__*/_jsxDEV(FaStar, {\n                className: \"star\",\n                color: \"#ffc107\",\n                size: 15\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 167,\n                columnNumber: 24\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 165,\n              columnNumber: 35\n            }, this);\n          })]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 21\n        }, this), \"Comments  :\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 5\n      }, this), posts.map(({\n        commentaire,\n        niveau,\n        personne\n      }) => {\n        return /*#__PURE__*/_jsxDEV(\"p\", {\n          id: \"comment\",\n          style: {\n            borderRadius: '8px',\n            height: '95px',\n            width: '230px',\n            paddingLeft: '50px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              className: \" imgCircleComment\",\n              src: logo,\n              style: {\n                width: '25%'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 194,\n              columnNumber: 1\n            }, this), \"\\xA0\\xA0\", personne, \" \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 192,\n            columnNumber: 1\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"starsComment\",\n            children: [...Array(niveau)].map((star, i) => {\n              const ratingValue = i + 1;\n              return /*#__PURE__*/_jsxDEV(\"label\", {\n                children: /*#__PURE__*/_jsxDEV(FaStar, {\n                  className: \"star\",\n                  color: \"#ffc107\",\n                  size: 15\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 204,\n                  columnNumber: 24\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 203,\n                columnNumber: 35\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 199,\n            columnNumber: 1\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 212,\n            columnNumber: 21\n          }, this), \"                      \", commentaire]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 35\n        }, this);\n      })]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 1\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 90,\n    columnNumber: 8\n  }, this);\n}, \"f+a6Bkkt20qrCewjGSo94BH6fGA=\"));\n_c2 = RatingCmp;\nexport default RatingCmp;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"RatingCmp$forwardRef\");\n$RefreshReg$(_c2, \"RatingCmp\");","map":{"version":3,"sources":["/Users/ayman/Desktop/final/AutoHire_react/src/Company/RatingsCmp.js"],"names":["React","forwardRef","useDebugValue","useEffect","useState","logo","Auxiliary","RatingPopup","url","axios","FaStar","RatingCmp","props","posts","setPosts","nomCmp","location","pathname","split","userr","localStorage","getItem","currentUser","JSON","parse","get","then","res","console","log","data","buttonPopup","setButtonPopup","s","l","avg","result","compare","rating","setRating","hover","setHover","comment","setComment","erreur","setErreur","RateFn","e","preventDefault","post","niveau","commentaire","entreprise","personne","username","response","error","height","Array","map","star","i","ratingValue","target","value","border","color","fontSize","lineHeight","length","borderRadius","width","paddingLeft"],"mappings":"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","sourcesContent":["\r\nimport React ,{ forwardRef ,useDebugValue,useEffect,useState}  from 'react'\r\nimport logo from '../assets/pdp.png'\r\nimport Auxiliary from '../Auxiliary'\r\nimport './company.css'\r\nimport RatingPopup from './RatingPopup'\r\n\r\nimport '../Company/RatingPopup.css'\r\nimport {url} from '../BaseUrl'\r\nimport axios from 'axios' ;\r\nimport {FaStar} from \"react-icons/fa\";\r\n\r\nconst RatingCmp = forwardRef((props) => {\r\n    const [posts, setPosts] = useState([])\r\n   // const idCompany = localStorage.getItem('cmp')\r\n   let nomCmp=props.location.pathname.split('/')[2];\r\n   const userr = localStorage.getItem('user')\r\n   const currentUser = JSON.parse(userr);\r\n\r\n   useEffect(() => {\r\n      \r\n    axios.get(`${url}avis/e/${nomCmp}`).then( res => {\r\n        console.log(res.data)\r\n        setPosts(res.data)\r\n       }) \r\n\r\n    \r\n        \r\n}        \r\n,[])\r\n \r\n      \r\n\r\n        \r\nconst [buttonPopup,setButtonPopup] = useState(false);\r\n   let s = 0;\r\n   let l,avg = 0;\r\n   let result ;\r\n\r\n   const compare = () => {\r\n    if (avg <= 1) {\r\n        result = 1;\r\n      } else if (avg <= 2) {\r\n        result = 2;\r\n      } else if (avg <= 3) {\r\n        result = 3;\r\n      } else if (avg <= 4) {\r\n        result = 4;\r\n      } else if (avg > 4) {\r\n        result = 5;\r\n      } else {\r\n        result = 1;\r\n      }\r\n      return result\r\n}\r\nconst [rating ,setRating] = useState(null);\r\nconst [hover,setHover] =useState(null);\r\nconst [comment, setComment] = useState('');\r\nconst [erreur, setErreur] = useState('');\r\nconst RateFn = (e) => {\r\n \r\n    e.preventDefault();\r\n    if((comment !==\"\")&&(rating>0))\r\n    {\r\n    axios.post(`${url}avis/newAvis`, {\r\n        niveau: rating,\r\n          commentaire: comment,\r\n          entreprise: nomCmp,\r\n          personne: currentUser.username\r\n      })\r\n    \r\n      .then( (response)=>{\r\n        setComment(\"\")\r\n      setRating(0)\r\n        console.log(response.data)\r\n\r\n      }\r\n      , (error) => {\r\n        console.log(error);\r\n      });\r\n    }\r\n\r\nelse{\r\n  setErreur(\"Empty Comment or Stars !  \")\r\n}\r\n\r\n}\r\n    return (\r\n        \r\n       <Auxiliary>\r\n    \r\n<div className='company_description' style={{height:'1000px'} }> \r\n\r\n        \r\n         \r\n<div className='absolute'> \r\n<h3>Rate this Company!</h3>\r\n<form>\r\n  \r\n                  <div>\r\n                      {[... Array(5)].map((star,i)=>\r\n                      {\r\n                          const ratingValue = i + 1;\r\n                       return  (  <label ><input type=\"radio\" name=\"rating\" hidden=\"true\" value ={ratingValue}\r\n                        onClick={()=>(setRating(ratingValue))}\r\n                       /> \r\n                       <FaStar className=\"star\" color ={ratingValue <= (hover ||rating) ?\"#ffc107\":\"#e4e5e9\"}\r\n                       size={15}\r\n                       onMouseEnter={()=>setHover(ratingValue)}\r\n                       onMouseLeave = {()=> setHover(null)}/>\r\n                       </label>\r\n\r\n\r\n    );}) }     \r\n                    </div>\r\n                  \r\n                    <input value={comment} onChange={e => setComment(e.target.value)}  type=\"text\"/>\r\n               <br></br>  \r\n                <input value={erreur} onChange={e => setErreur(e.target.value)}  type=\"text\" style ={{border:'none',color:'red'}}disabled/>\r\n                <br></br> <button type=\"submit\" style={{ color : 'white' , fontSize:'13px',lineHeight:'1.7' }} className=\"btnAvis\" onClick={\r\n   \r\n        \r\n        (e)=>RateFn(e)}>rate</button>\r\n<br></br>\r\n\r\n                    </form>\r\n       <RatingPopup\r\ntrigger={buttonPopup} setTrigger = {setButtonPopup}>\r\n           <h3>Rating </h3>\r\n       </RatingPopup>\r\n        </div>       \r\n  \r\n<main>\r\n      \r\n        </main>\r\n\r\n   \r\n    \r\n    <h6 className='hide'>  {posts.map(\r\n        ({niveau }) =>\r\n                      {\r\n                          s+=niveau\r\n\r\n                          l=posts.length\r\n\r\n\r\n\r\n\r\n                       \r\n                      \r\n                         \r\n                      })  }</h6>\r\n  \r\n  <h6 className='hide'> \r\n\r\n  {avg = s/l ,compare()  }</h6>\r\n \r\n\r\n    \r\n\r\n    <h3><div> Total Ratings:    \r\n                      {[... Array(result)].map((star,i)=>\r\n                      {\r\n                          const ratingValue = i + 1;\r\n                       return  (  <label >\r\n                         \r\n                       <FaStar className=\"star\" color =\"#ffc107\"\r\n                       size={15}\r\n                     />\r\n                       </label>\r\n\r\n\r\n    );}) }   \r\n\r\n                    </div>\r\n                    <br></br>\r\n                    Comments  :</h3>\r\n                    \r\n                   \r\n    \r\n    {posts.map(\r\n        ({commentaire,niveau ,personne}) =>\r\n                      {\r\n                         \r\n\r\n\r\n\r\n                       \r\n                      \r\n                         \r\n                       return  (  <p id = \"comment\" style={{borderRadius:'8px',height:'95px',width:'230px',paddingLeft:'50px'}}>\r\n<h3> \r\n                        \r\n<img className=' imgCircleComment' src={logo} style={{width:'25%'} }></img>&nbsp;&nbsp;\r\n\r\n{personne} </h3>\r\n\r\n\r\n<div className='starsComment'>\r\n                      {[... Array(niveau)].map((star,i)=>\r\n                      {\r\n                          const ratingValue = i + 1;\r\n                       return  (  <label >\r\n                       <FaStar className=\"star\" color =\"#ffc107\"\r\n                       size={15}\r\n                     />\r\n                       </label>\r\n\r\n\r\n    );}) }   \r\n                    </div>   \r\n                    <br></br>                      {commentaire}</p>\r\n                       \r\n                       \r\n\r\n\r\n    );})  }\r\n  \r\n        \r\n \r\n    \r\n  \r\n</div>\r\n  \r\n        \r\n \r\n</Auxiliary>\r\n    \r\n\r\n    )\r\n\r\n})\r\n\r\n\r\nexport default  RatingCmp"]},"metadata":{},"sourceType":"module"}